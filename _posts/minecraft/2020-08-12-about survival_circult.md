---
layout: post
title: 生电相关
date: 2020-08-20
tags: Minecraft 生电
---

[TOC]

## 下届传送门

### 大小

框架最小 **4x5** ，最大 **23x23** 。

传送门方块最小 **2x2** ，最大 21x21 。

### 行为

玩家传送动画 **4秒** 。

非玩家冷却30秒

在对面维度128格内寻找已激活的传送门

同一个门

- 主世界->下界x,z最大

- 下界->主世界x,z最小

	y轴会选择最小坐标

不会改变玩家朝向

### 坐标转换

横向：下届=floor(主世界/8)

纵向：下届=主世界

> Java中的floor返回小于等于参数的最大整数，floor(-29.5) = -30

> X和Z坐标的转换会约束在±29999872（包括本身），而这会影响到从主世界用下界传送门去超过±3749984的地方。

### 地狱门创建

水平16方块。3×4可建筑区域的上方都有4格的空气方块是一个有效的位置。当有足够的空间时，传送门的方向是随机的。三维距离的最近有效位置总是会被选择。

如果第一次对有效位置的检验完全失败，检验会重新寻找一个1×4宽且每个方块上方有4格空气的可建筑区域。

如果再次失败，传送门会强制指定坐标，但Y坐标会被强制指定为低于世界高度的70-10（例如，对于下界是118，主世界则是246）。当传送门以此种方法强制指定坐标时，会在目标位置创建1个上方有3格空气的2×3的黑曜石平台，会覆盖那个位置的任何方块。这提供了地下空气区域，如果在空气中则是一个小平台。

因为下界的高度限制为128，因此搜索算法不会在下界Y=128以上的区域寻找或创建传送门。如果没有更近一些的传送门或有效位置，传送门可能会在主世界的Y=128以上区域生成或被找到。

## 玩家

高 `1.8m`，潜行时 `1.5m`，滑行、游泳时 `0.6m`。

宽 `0.6m`

跳跃高度大约 `1.25219m`

## 附魔

### 盔甲

|    魔咒    |                        能够减少的伤害                        | EPF 等级I | EPF 等级II | EPF 等级III | EPF 等级IV |
| :--------: | :----------------------------------------------------------: | :-------: | :--------: | :---------: | :--------: |
|    保护    |                             全部                             |     1     |     2      |      3      |     4      |
|  火焰保护  | [火](https://minecraft-zh.gamepedia.com/火)、[熔岩](https://minecraft-zh.gamepedia.com/熔岩)、[岩浆块](https://minecraft-zh.gamepedia.com/岩浆块)和[烈焰人](https://minecraft-zh.gamepedia.com/烈焰人)火球 |     2     |     4      |      6      |     8      |
|  爆炸保护  |       [爆炸](https://minecraft-zh.gamepedia.com/爆炸)        |     2     |     4      |      6      |     8      |
| 弹射物保护 | [箭](https://minecraft-zh.gamepedia.com/弓)、[恶魂](https://minecraft-zh.gamepedia.com/恶魂)和[烈焰人](https://minecraft-zh.gamepedia.com/烈焰人)火球 |     2     |     4      |      6      |     8      |
|  摔落保护  | 掉落伤害（包括[末影珍珠](https://minecraft-zh.gamepedia.com/末影珍珠)） |     3     |     6      |      9      |     12     |

对应类型的伤害计算方式：$\Large damage = damage * (\frac{1 - \Sigma EPF}{25} )$

除了[虚空](https://minecraft-zh.gamepedia.com/虚空)伤害、`/kill`命令和[饥饿](https://minecraft-zh.gamepedia.com/饥饿)造成的伤害。

### 武器

- 穿刺 **[三叉戟]**

	对水生生物造成额外伤害。（基岩版为水中生物）

- 火焰附加、击退、抢夺、横扫之刃 **[剑]**

- 亡灵杀手、截肢杀手、锋利 **[剑]** **[斧]**

- 摔落保护 **[靴]**

## 生成

1. 生成方块周围 `24` 格（球体）内不能有玩家或者玩家出生点
2. 但众生无数量 < 该生物容量

### 攻击型生物（除史莱姆、恶魂、岩浆怪、僵尸猪灵、烈焰人......）

1. 难度非和平

2. 亮度 `<=7` 

	> 亮度、阳光照射会影响生成失败几率

## 清除

> 在多人游戏中，没有玩家在线时不会发生生物清除现象。

![生物生成范围](https://gamepedia.cursecdn.com/minecraft_zh_gamepedia/4/4a/Mob_spawning_ranges.png?version=5d250abc99f9767e041023785f616852)

- 半径 `32m` 内无玩家情况超过 `30` 秒， 每 **tick** 有 $\frac{1}{800}$ 的几率被清除。

- 半径 `128m` 内无玩家，立刻被清除

> <font color="red">如果敌对生物手持或穿戴任何被玩家给予或从地上掉落的物品，则它们不会被清除。</font>

> <font color="red">被命名牌命名的敌对生物不会被清除，但通过被命名的刷怪蛋生成的生物仍会照常被清除。</font>

## 冰 & 雪

### 冰

**水** 结冰条件：

1. **水** 直接暴露于天空

2. **水 **四周毗邻方块亮度 `< 13` （**水** 的亮度 `<= 11`）

3. **水 **四周毗邻位置有一 **非水方块**

	> 注：经测试 **含水方块** 不算作 **非水方块**

**冰** 融化成 **水** 条件：

- 亮度 `>=11`

	> 下方有方块的情况下被破坏也可以变成水。

### 雪

下雪天 雪片产生条件：

1. 下方方块非透明（除了 **冰** 和 **浮冰**）
2. 下方方块亮度 `<=10` （雪亮度 `<=11` ）